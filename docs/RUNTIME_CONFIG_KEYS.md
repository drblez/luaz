# Runtime Config Keys (Draft)

## Назначение

Этот документ фиксирует предложенный список ключей конфигурации рантайма Lua/TSO,
их назначение и ожидаемое поведение. Статус: черновик для обсуждения.

## MVP (обязательный стартовый набор)

- `allow.tso.cmd` (`whitelist` | `blacklist`)
  - Зачем: централизованный контроль доступных TSO‑команд.
  - Поведение: при `whitelist` разрешены только команды из `tso.cmd.whitelist`,
    при `blacklist` запрещены команды из `tso.cmd.blacklist`.
- `tso.cmd.whitelist` (список через запятую)
  - Зачем: ограничить набор команд в безопасных сценариях.
  - Поведение: берётся первое слово команды, сравнение без регистра.
- `tso.cmd.blacklist` (список через запятую)
  - Зачем: блокировать опасные команды даже при общем разрешении.
- `trace.level` (`off` | `error` | `info` | `debug`)
  - Зачем: регулировать объём диагностического вывода.
- `limits.output.lines` (целое число)
  - Зачем: ограничить объём захваченного вывода `tso.cmd(..., true)`.

## Расширение (по согласованию)

- `tso.cmd.capture.default` (`true` | `false`)
  - Зачем: дефолтный режим захвата вывода, если параметр `capture` не задан.
- `tso.rexx.exec` (имя REXX‑члена, например `LUTSO`)
  - Зачем: менять имя REXX‑шлюза без пересборки.
- `tso.rexx.dd` (DDNAME, обычно `SYSEXEC`)
  - Зачем: менять DDNAME для поиска REXX‑шлюза.
- `luapath.dd` (DDNAME, обычно `LUAPATH`)
  - Зачем: менять DDNAME для поиска модулей `require`.
- `luain.dd` (DDNAME)
  - Зачем: переопределять DDNAME для основного скрипта.
- `luaout.dd` (DDNAME)
  - Зачем: переопределять DDNAME для вывода Lua.
- `luaconf.member` (имя члена, например `LUACONF`)
  - Зачем: хранить несколько конфигов в одном PDS/PDSE.

## TLS (если модуль TLS включён)

- `tls.keyring`
  - Зачем: указать SAF key ring.
- `tls.pkcs11.token`
  - Зачем: указать PKCS#11 token.
- `tls.profile`
  - Зачем: выбрать профиль TLS.

## Общие правила

- Приоритет: `PARM` > `LUACFG` > встроенные дефолты.
- Формат: `key = value`, одна запись на строку.
- Комментарии: строки, начинающиеся с `#` или `*`.
- Неизвестные ключи должны выдавать сообщение `LUZNNNNN`.
